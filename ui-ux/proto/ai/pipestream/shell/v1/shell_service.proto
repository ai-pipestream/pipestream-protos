syntax = "proto3";

package ai.pipestream.shell.v1;

import "grpc/health/v1/health.proto";

option java_multiple_files = true;
option java_outer_classname = "ShellServiceProto";
option java_package = "ai.pipestream.shell.v1";

// Aggregated shell-facing service for UI state.
service ShellService {
  // Stream health updates for a set of core/base services.
  // The server sends an initial snapshot (one update per service),
  // followed by incremental updates as health changes.
  rpc WatchHealth(WatchHealthRequest) returns (stream WatchHealthResponse);
}

message WatchHealthRequest {
  // Empty for now - may add filters in future
}

message WatchHealthResponse {
  string service_name = 1; // logical name, e.g. "repository-service"
  string display_name = 2; // human-friendly label
  string target = 3; // resolved endpoint, e.g. host:port or "dynamic"
  grpc.health.v1.HealthCheckResponse.ServingStatus status = 4; // SERVING / NOT_SERVING / UNKNOWN
  string observed_at = 5; // ISO-8601 timestamp for the update
}
