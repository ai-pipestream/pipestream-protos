syntax = "proto3";

package ai.pipestream.parsed.data.media.v1;

import "ai/pipestream/parsed/data/tika/base/v1/tika_base_metadata.proto";
import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";

option java_multiple_files = true;
option java_outer_classname = "MediaMetadataProto";
option java_package = "ai.pipestream.parsed.data.media.v1";

// Comprehensive media metadata as extracted by Tika from audio and video files.
// Based on Tika's XMPDM interface, TikaCoreProperties, and actual parser implementations.
// This is a 1:1 mapping to all fields that Tika can extract from media files.
message MediaMetadata {
  // === TikaCoreProperties (Core Tika metadata) ===
  // TikaCoreProperties.TITLE / DublinCore.TITLE
  optional string title = 1;
  // TikaCoreProperties.CREATOR / DublinCore.CREATOR
  optional string creator = 2;
  // TikaCoreProperties.DESCRIPTION / DublinCore.DESCRIPTION
  optional string description = 3;
  // TikaCoreProperties.SUBJECT / DublinCore.SUBJECT
  optional string subject = 4;
  // TikaCoreProperties.LANGUAGE / DublinCore.LANGUAGE
  optional string language = 5;
  // TikaCoreProperties.PUBLISHER / DublinCore.PUBLISHER
  optional string publisher = 6;
  // TikaCoreProperties.RIGHTS / DublinCore.RIGHTS
  optional string rights = 7;
  // TikaCoreProperties.FORMAT / DublinCore.FORMAT
  optional string format = 8;
  // TikaCoreProperties.IDENTIFIER / DublinCore.IDENTIFIER
  optional string identifier = 9;
  // TikaCoreProperties.CONTRIBUTOR / DublinCore.CONTRIBUTOR
  optional string contributor = 10;
  // TikaCoreProperties.COVERAGE / DublinCore.COVERAGE
  optional string coverage = 11;
  // TikaCoreProperties.RELATION / DublinCore.RELATION
  optional string relation = 12;
  // TikaCoreProperties.SOURCE / DublinCore.SOURCE
  optional string source = 13;
  // TikaCoreProperties.TYPE / DublinCore.TYPE
  optional string type = 14;
  // TikaCoreProperties.CREATED / DublinCore.CREATED
  optional google.protobuf.Timestamp created = 15;
  // TikaCoreProperties.MODIFIED / DublinCore.MODIFIED
  optional google.protobuf.Timestamp modified = 16;
  // TikaCoreProperties.CREATOR_TOOL / XMP.CREATOR_TOOL
  optional string creator_tool = 17;
  // TikaCoreProperties.COMMENTS
  optional string comments = 18;
  // TikaCoreProperties.RATING / XMP.RATING
  optional int32 rating = 19;

  // === XMPDM Properties (XMP Dynamic Media schema) ===
  // XMPDM.ABS_PEAK_AUDIO_FILE_PATH
  optional string abs_peak_audio_file_path = 20;
  // XMPDM.ALBUM
  optional string album = 21;
  // XMPDM.ALT_TAPE_NAME
  optional string alt_tape_name = 22;
  // XMPDM.ARTIST
  optional string artist = 23;
  // XMPDM.ALBUM_ARTIST
  optional string album_artist = 24;
  // XMPDM.AUDIO_MOD_DATE
  optional google.protobuf.Timestamp audio_mod_date = 25;
  // XMPDM.AUDIO_SAMPLE_RATE
  optional int32 audio_sample_rate = 26;
  // XMPDM.AUDIO_SAMPLE_TYPE (8Int, 16Int, 32Int, 32Float)
  optional string audio_sample_type = 27;
  // XMPDM.AUDIO_CHANNEL_TYPE (Mono, Stereo, 5.1, 7.1)
  optional string audio_channel_type = 28;
  // XMPDM.AUDIO_COMPRESSOR
  optional string audio_compressor = 29;
  // XMPDM.COMPILATION
  optional int32 compilation = 30;
  // XMPDM.COMPOSER
  optional string composer = 31;
  // XMPDM.COPYRIGHT
  optional string copyright = 32;
  // XMPDM.DISC_NUMBER
  optional int32 disc_number = 33;
  // XMPDM.DURATION (in seconds unless scale is set)
  optional double duration = 34;
  // XMPDM.ENGINEER
  optional string engineer = 35;
  // XMPDM.FILE_DATA_RATE (rational: "36/10" = 3.6 MB/sec)
  optional string file_data_rate = 36;
  // XMPDM.GENRE
  optional string genre = 37;
  // XMPDM.INSTRUMENT
  optional string instrument = 38;
  // XMPDM.KEY (C, C#, D, D#, E, F, F#, G, G#, A, A#, B)
  optional string key = 39;
  // XMPDM.LOG_COMMENT
  optional string log_comment = 40;
  // XMPDM.LOOP
  optional bool loop = 41;
  // XMPDM.NUMBER_OF_BEATS
  optional double number_of_beats = 42;
  // XMPDM.METADATA_MOD_DATE
  optional google.protobuf.Timestamp metadata_mod_date = 43;
  // XMPDM.PULL_DOWN (WSSWW, SSWWW, etc.)
  optional string pull_down = 44;
  // XMPDM.RELATIVE_PEAK_AUDIO_FILE_PATH
  optional string relative_peak_audio_file_path = 45;
  // XMPDM.RELEASE_DATE
  optional google.protobuf.Timestamp release_date = 46;
  // XMPDM.SCALE_TYPE (Major, Minor, Both, Neither)
  optional string scale_type = 47;
  // XMPDM.SCENE
  optional string scene = 48;
  // XMPDM.SHOT_DATE
  optional google.protobuf.Timestamp shot_date = 49;
  // XMPDM.SHOT_LOCATION
  optional string shot_location = 50;
  // XMPDM.SHOT_NAME
  optional string shot_name = 51;
  // XMPDM.SPEAKER_PLACEMENT
  optional string speaker_placement = 52;
  // XMPDM.STRETCH_MODE (Fixed length, Time-Scale, etc.)
  optional string stretch_mode = 53;
  // XMPDM.TAPE_NAME
  optional string tape_name = 54;
  // XMPDM.TEMPO
  optional double tempo = 55;
  // XMPDM.TIME_SIGNATURE (2/4, 3/4, 4/4, etc.)
  optional string time_signature = 56;
  // XMPDM.TRACK_NUMBER
  optional int32 track_number = 57;
  // XMPDM.VIDEO_ALPHA_MODE (straight, pre-multiplied)
  optional string video_alpha_mode = 58;
  // XMPDM.VIDEO_ALPHA_UNITY_IS_TRANSPARENT
  optional bool video_alpha_unity_is_transparent = 59;
  // XMPDM.VIDEO_COLOR_SPACE (sRGB, CCIR-601, CCIR-709)
  optional string video_color_space = 60;
  // XMPDM.VIDEO_COMPRESSOR
  optional string video_compressor = 61;
  // XMPDM.VIDEO_FIELD_ORDER (Upper, Lower, Progressive)
  optional string video_field_order = 62;
  // XMPDM.VIDEO_FRAME_RATE (24, NTSC, PAL)
  optional string video_frame_rate = 63;
  // XMPDM.VIDEO_MOD_DATE
  optional google.protobuf.Timestamp video_mod_date = 64;
  // XMPDM.VIDEO_PIXEL_DEPTH (8Int, 16Int, 32Int, 32Float)
  optional string video_pixel_depth = 65;
  // XMPDM.VIDEO_PIXEL_ASPECT_RATIO (rational: "648/720")
  optional string video_pixel_aspect_ratio = 66;

  // === Parser-specific fields (from MP3Parser, MP4Parser, etc.) ===
  // Metadata.CONTENT_TYPE
  optional string content_type = 67;
  // "samplerate" (MP3Parser)
  optional string samplerate = 68;
  // "channels" (MP3Parser)
  optional string channels = 69;
  // "version" (MP3Parser - audio version)
  optional string version = 70;
  // Release year (from ID3 tags)
  optional string year = 71;

  // === Additional technical fields ===
  // File size in bytes
  optional int64 file_size = 72;
  // Overall bitrate
  optional int32 bitrate = 73;
  // Encoding used
  optional string encoding = 74;
  // Encoder software
  optional string encoder = 75;
  // Duration in seconds (calculated)
  optional double duration_seconds = 76;
  // Human readable duration
  optional string duration_string = 77;
  // Start time offset
  optional double start_time = 78;

  // === Video-specific technical fields ===
  // Video width in pixels
  optional int32 video_width = 79;
  // Video height in pixels
  optional int32 video_height = 80;
  // Numeric video frame rate
  optional double video_frame_rate_numeric = 81;
  // Video aspect ratio
  optional string aspect_ratio = 82;
  // Video bitrate
  optional int32 video_bitrate = 83;

  // === Audio-specific technical fields ===
  // Number of audio channels (numeric)
  optional int32 audio_channels = 84;
  // Audio bit depth
  optional int32 audio_bits_per_sample = 85;
  // Audio bitrate
  optional int32 audio_bitrate = 86;

  // === Streaming and format fields ===
  // Can be streamed
  optional bool streaming_capable = 87;
  // Streaming format
  optional string streaming_format = 88;
  // Streaming bitrate
  optional double streaming_bitrate = 89;
  // Major brand (MP4)
  optional string major_brand = 90;
  // Codec used
  optional string codec = 91;

  // === Geographic fields (if present in media) ===
  // TikaCoreProperties.LATITUDE
  optional double latitude = 92;
  // TikaCoreProperties.LONGITUDE
  optional double longitude = 93;
  // TikaCoreProperties.ALTITUDE
  optional double altitude = 94;

  // === Signature and security fields ===
  // TikaCoreProperties.HAS_SIGNATURE
  optional bool has_signature = 95;
  // TikaCoreProperties.IS_ENCRYPTED
  optional bool is_encrypted = 96;

  // === Parsing metadata ===
  // TikaCoreProperties.TIKA_PARSED_BY
  repeated string parsed_by = 97;
  // TikaCoreProperties.TIKA_DETECTED_LANGUAGE
  optional string detected_language = 98;
  // TikaCoreProperties.TIKA_DETECTED_LANGUAGE_CONFIDENCE
  optional double detected_language_confidence = 99;

  // === Catch-all for unknown/unmapped fields ===
  google.protobuf.Struct additional_metadata = 200;

  // Base Tika fields common to all document types
  ai.pipestream.parsed.data.tika.base.v1.TikaBaseFields base_fields = 201;
}
